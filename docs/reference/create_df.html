<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a Consolidated Data Frame from Multiple Raw Count Files — create_df • TranscripTools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a Consolidated Data Frame from Multiple Raw Count Files — create_df"><meta name="description" content='This function reads and merges raw count data from several separate files into one data frame.
It processes each file by reading the data, assigning descriptive column names based on the file name,
and appending the count columns to the existing data. After processing, only columns with count values
are retained, and rows with labels such as "no_feature" or "ambiguous" (if present) are removed.'><meta property="og:description" content='This function reads and merges raw count data from several separate files into one data frame.
It processes each file by reading the data, assigning descriptive column names based on the file name,
and appending the count columns to the existing data. After processing, only columns with count values
are retained, and rows with labels such as "no_feature" or "ambiguous" (if present) are removed.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TranscripTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a Consolidated Data Frame from Multiple Raw Count Files</h1>

      <div class="d-none name"><code>create_df.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function reads and merges raw count data from several separate files into one data frame.
It processes each file by reading the data, assigning descriptive column names based on the file name,
and appending the count columns to the existing data. After processing, only columns with count values
are retained, and rows with labels such as "no_feature" or "ambiguous" (if present) are removed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_df</span><span class="op">(</span><span class="va">raw_counts</span>, <span class="va">files</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-raw-counts">raw_counts<a class="anchor" aria-label="anchor" href="#arg-raw-counts"></a></dt>
<dd><p>A data frame containing an initial set of raw counts. This can be an empty data frame
or one that is pre-populated with some counts. It serves as the base to which new count data will be appended.</p></dd>


<dt id="arg-files">files<a class="anchor" aria-label="anchor" href="#arg-files"></a></dt>
<dd><p>A character vector of file paths to the raw count files. Each file is expected to be in a format
where it has no header and contains two columns.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame that consolidates the count columns from all the provided files, with non-count columns and
extra rows (such as "no_feature" or "ambiguous") removed.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following steps:</p><ul><li><p>Loops over each file in <code>files</code> and reads the data using <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.delim</a></code> with <code>header = FALSE</code>.</p></li>
<li><p>Assigns column names to the data based on the file's base name, creating names like <code>genes_&lt;filename&gt;</code> and
<code>counts_&lt;filename&gt;</code>.</p></li>
<li><p>Sets the row names of the data frame using the first column, so that the count data can be merged by matching gene names.</p></li>
<li><p>Appends the new data to <code>raw_counts</code> using <code><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></code>.</p></li>
<li><p>Retains only those columns whose names start with "counts", effectively discarding the gene identifier columns.</p></li>
<li><p>Removes any rows where the row name matches <code>"no_feature"</code> or <code>"ambiguous"</code>, if present.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Before running this function, ensure you have defined the paths to your raw count files and that each file adheres
to the expected format (i.e., two columns with no header). Adjust the filtering of extra rows as necessary based
on your data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create an initial raw counts data frame (this can be empty or contain initial data)</span></span></span>
<span class="r-in"><span><span class="va">raw_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>row.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gene1"</span>, <span class="st">"Gene2"</span>, <span class="st">"Gene3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define a list of file paths to the raw count files (modify the path and pattern as needed)</span></span></span>
<span class="r-in"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"path/to/counts"</span>, pattern <span class="op">=</span> <span class="st">"*.txt"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Consolidate the raw counts from all files into one data frame</span></span></span>
<span class="r-in"><span><span class="va">consolidated_counts</span> <span class="op">&lt;-</span> <span class="fu">create_df</span><span class="op">(</span><span class="va">raw_counts</span>, <span class="va">files</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Francesco Edoardo Vallone.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

